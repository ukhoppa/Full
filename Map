-- Map Scanner GUI (LocalScript)
-- Place in StarterPlayerScripts or StarterGui

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-- GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "MapScannerGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 260, 0, 220)
frame.Position = UDim2.new(0, 10, 1, -230)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local title = Instance.new("TextLabel")
title.Text = "ðŸ§­ Map Scanner"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = frame

-- Step size input
local stepLabel = Instance.new("TextLabel")
stepLabel.Text = "Step size (studs):"
stepLabel.Position = UDim2.new(0, 10, 0, 40)
stepLabel.Size = UDim2.new(0, 130, 0, 25)
stepLabel.BackgroundTransparency = 1
stepLabel.TextColor3 = Color3.new(1, 1, 1)
stepLabel.Parent = frame

local stepBox = Instance.new("TextBox")
stepBox.Position = UDim2.new(0, 150, 0, 40)
stepBox.Size = UDim2.new(0, 80, 0, 25)
stepBox.Text = "40"
stepBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
stepBox.TextColor3 = Color3.new(1, 1, 1)
stepBox.ClearTextOnFocus = false
stepBox.Parent = frame

-- Height input
local heightLabel = Instance.new("TextLabel")
heightLabel.Text = "Height (Y):"
heightLabel.Position = UDim2.new(0, 10, 0, 70)
heightLabel.Size = UDim2.new(0, 130, 0, 25)
heightLabel.BackgroundTransparency = 1
heightLabel.TextColor3 = Color3.new(1, 1, 1)
heightLabel.Parent = frame

local heightBox = Instance.new("TextBox")
heightBox.Position = UDim2.new(0, 150, 0, 70)
heightBox.Size = UDim2.new(0, 80, 0, 25)
heightBox.Text = "20"
heightBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
heightBox.TextColor3 = Color3.new(1, 1, 1)
heightBox.ClearTextOnFocus = false
heightBox.Parent = frame

-- Heartbeat interval input
local tickLabel = Instance.new("TextLabel")
tickLabel.Text = "TP every heartbeat(s):"
tickLabel.Position = UDim2.new(0, 10, 0, 100)
tickLabel.Size = UDim2.new(0, 130, 0, 25)
tickLabel.BackgroundTransparency = 1
tickLabel.TextColor3 = Color3.new(1, 1, 1)
tickLabel.Parent = frame

local tickBox = Instance.new("TextBox")
tickBox.Position = UDim2.new(0, 150, 0, 100)
tickBox.Size = UDim2.new(0, 80, 0, 25)
tickBox.Text = "6"
tickBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
tickBox.TextColor3 = Color3.new(1, 1, 1)
tickBox.ClearTextOnFocus = false
tickBox.Parent = frame

-- Buttons
local startBtn = Instance.new("TextButton")
startBtn.Text = "â–¶ Start Scan"
startBtn.Size = UDim2.new(0, 110, 0, 30)
startBtn.Position = UDim2.new(0, 10, 0, 160)
startBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
startBtn.TextColor3 = Color3.new(1, 1, 1)
startBtn.Font = Enum.Font.SourceSansBold
startBtn.TextSize = 14
startBtn.Parent = frame

local stopBtn = Instance.new("TextButton")
stopBtn.Text = "â›” Stop"
stopBtn.Size = UDim2.new(0, 110, 0, 30)
stopBtn.Position = UDim2.new(0, 140, 0, 160)
stopBtn.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
stopBtn.TextColor3 = Color3.new(1, 1, 1)
stopBtn.Font = Enum.Font.SourceSansBold
stopBtn.TextSize = 14
stopBtn.Parent = frame

-- Scanning logic
local scanning = true
local loopRunning = false
local connection

local function startScanning()
	if loopRunning then return end
	loopRunning = true
	scanning = true
	startBtn.Text = "Running..."
	startBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)

	-- read GUI values
	local step = tonumber(stepBox.Text) or 40
	local height = tonumber(heightBox.Text) or 20
	local tickSpeed = tonumber(tickBox.Text) or 6
	local radiusMax = 1368
	local angle = 0
	local radius = step
	local heartbeatCounter = 0

	connection = RunService.Heartbeat:Connect(function()
		if not scanning then return end

		heartbeatCounter += 1
		if heartbeatCounter >= tickSpeed then
			heartbeatCounter = 0

			-- teleport along spiral
			local x = math.cos(angle) * radius
			local z = math.sin(angle) * radius
			hrp.CFrame = CFrame.new(Vector3.new(x, height, z))

			local angleStep = math.rad(10)
			angle += angleStep
			radius += step * (angleStep / (2 * math.pi))

			if radius >= radiusMax then
				print("âœ… Scan complete")
				scanning = false
				connection:Disconnect()
				startBtn.Text = "â–¶ Start Scan"
				startBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
				loopRunning = false
				return
			end
		end
	end)
end

local function stopScanning()
	if scanning then
		scanning = false
		if connection then connection:Disconnect() end
		startBtn.Text = "â–¶ Start Scan"
		startBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
		loopRunning = false
		print("ðŸ›‘ Scan stopped manually")
	end
end

-- Button events
startBtn.MouseButton1Click:Connect(startScanning)
stopBtn.MouseButton1Click:Connect(stopScanning)

-- Start automatically on script load
task.spawn(startScanning)
